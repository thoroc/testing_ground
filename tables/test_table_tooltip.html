<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="bootstrap-form-examples/css/bootstrap.min.css" type="text/css">
        <link rel="stylesheet" href="bootstrap-form-examples/css/bootstrap.css" type="text/css"/>
        <link rel="stylesheet" href="bootstrap-form-examples/css/bootstrap-responsive.min.css" type="text/css">
        <link rel="stylesheet" href="test_div_table.html" type="text/css"/>
        <link rel="stylesheet" href="DataTables-1.9.4/extras/ColVis/media/docs/media/css/shThemeDataTables.css" type="text/css">


        <style>
            body {
                background-color: ButtonFace;
            }
            .cars {
                /*                border-collapse:collapse;
                                border-color:Red;*/
                border:solid 2px Red;
            }
            .cell-tooltip {
                border:solid 2px green;
                background-color: Yellow;
            }
            .choice-tooltip {
                border: solid 2px greenyellow;
                background-color: orange;
            }
            td {
                padding: 0px;
            }
            ul.li {
                text-align: left;
            }
            table-tooltip {
                border: solid 1px whitesmoke;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <table class="cars" border="1">
                <legend>static html table - Bootstrap: Tooltip</legend>
                <thead>
                    <tr>
                        <th>S.No</th>
                        <th>Title</th>
                        <th>Score</th>
                        <th>weight</th>
                        <th>Reviewer's comment</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="section-row">
                        <td colspan=5>Section 1: Customer Contact</td>
                    </tr>
                    <tr class="field-row">
                        <td>1</td>
                        <td>
                            <div class="cell-tooltip" data-toggle="tooltip"
                                 title="Did the engineer follow appropriate contact method Email / phone / IM as requested by customer or required by PH+ policy?">
                                Contact Method
                            </div>
                        </td>
                        <td class="field-score">
<!--                            <div title="<ul class=\'info-tooltip\'><li>Yes: Right contact method was used by engineer and case was documented with it.</li>
                                 <li>NO: Right contact method was not used, No / un-clear case notes.</li>
                                 <li>Acceptable: Acceptable</li></ul>"-->
                            <div title="<table class=\'\'>
                                 <tr><td>Yes</td><td>Right contact method was used by engineer and case was documented with it.</td></tr>
                                 <tr><td>NO</td><td>Right contact method was not used, No / un-clear case notes.</td></tr>
                                 <tr><td>Acceptable</td><td>Acceptable</td></tr></table"
                                 class="choice-tooltip" data-toggle="tooltip">
                                <select class="selector">
                                    <option value="100" selected="selected">Yes</option>
                                    <option value="0">No</option>
                                    <option value="50">Acceptable</option>
                                </select>
                            </div>
                        </td>
                        <td class="field-weight">5</td>
                        <td></td>
                    </tr>
                    <tr class="field-row">
                        <td>2</td>
                        <td>
                            <div class="cell-tooltip" data-toggle="tooltip"
                                 title="Did the engineer send the initial response to the client within one hour of accepting the case?">
                                Timely Initial Response
                            </div>
                        </td>
                        <td class="field-score">
                            <div title="<div>Yes: Appropriate e-mail/ phone was sent to customer.</div>
                                 <div>No: Introduction mail was not sent to the customer by engineer with in 1 hour.</div>
                                 <div>Acceptable: Mail was sent however had inaccurate or missing information.( template was not used).</div>"
                                 class="choice-tooltip" data-toggle="tooltip">
                                <select class="selector">
                                    <option value="100" selected="selected">Yes</option>
                                    <option value="0">No</option>
                                    <option value="50">Acceptable</option>
                                </select>
                            </div>
                        </td>
                        <td class="field-weight">5</td>
                        <td></td>
                    </tr>
                    <tr class="field-row">
                        <td>3</td>
                        <td>
                            <div class="cell-tooltip" data-toggle="tooltip"
                                 title="All E-mail communications should have complete signature of the engineer. Signature should have Name, Shift timings, Team Name and Work Phone Number?">
                                Completeness of the solution offered
                            </div>
                        </td>
                        <td class="field-score">
                            <div title="<div>Yes: Appropriate signatures are there in all e-mail communications.</div>
                                 <div>No: Signatures not used / Incorrect signatures used</div>
                                 <div>Acceptable: Acceptable but not complete.</div>"
                                 class="choice-popover" data-toggle="tooltip">
                                <select class="selector">
                                    <option value="100" selected="selected">Yes</option>
                                    <option value="0">No</option>
                                    <option value="50">Acceptable</option>
                                </select>
                            </div>
                        </td>
                        <td class="field-weight">5</td>
                        <td></td>
                    </tr>
                    <tr class="section-score-row">
                        <td colspan="2">Section Score</td>
                        <td class="section-score"></td>
                        <td class="section-weight"></td>
                        <td></td>
                    </tr>
                    <tr class="section-row">
                        <td colspan="5">Section 2: Case Management</td>
                    </tr>
                    <tr class="field-row">
                        <td>4</td>
                        <td>
                            <div class="cell-tooltip" data-toggle="tooltip"
                                 title="Did the engineer document the description & solution proposed in the Case Comments field?">
                                Description & Solution proposed
                            </div>
                        </td>
                        <td class="field-score">
                            <div title="<div>Yes: Engineer described in case notes , his/her understanding of the customer requirement and solution proposed was also documented.</div>
                                 <div>No: No description/Wrong description / Solution proposed not documented.</div>
                                 <div>Acceptable: Unclear description / solution proposed.</div>"
                                 class="choice-tooltip" data-toggle="tooltip">
                                <select class="selector">
                                    <option value="100" selected="selected">Yes</option>
                                    <option value="0">No</option>
                                    <option value="50">Acceptable</option>
                                </select>
                            </div>
                        </td>
                        <td class="field-weight">5</td>
                        <td></td>
                    </tr>
                    <tr class="field-row">
                        <td>5</td>
                        <td>
                            <div class="cell-tooltip" data-toggle="tooltip"
                                 title="Did the engineer document Solution delivery date & Resolution in the Case Comments SFDC field?">
                                Solution delivery date & Resolution
                            </div>
                        </td>
                        <td class="field-score">
                            <div title="<div>Yes: Yes.</div>
                                 <div>No: No / not clear.</div>
                                 <div>Acceptable: Acceptable.</div>"
                                 class="choice-tooltip" data-toggle="tooltip">
                                <select class="selector">
                                    <option value="100" selected="selected">Yes</option>
                                    <option value="0">No</option>
                                    <option value="50">Acceptable</option>
                                </select>
                            </div>
                        </td>
                        <td class="field-weight">5</td>
                        <td></td>
                    </tr>
                    <tr class="field-row">
                        <td>6</td>
                        <td>
                            <div class="cell-tooltip" data-toggle="tooltip"
                                 title="Did TSN engineer document all case related conversations? (Phone/IM should be in SFDC Case Comments field. Emails should be in SFDC Email record fields.)">
                                E-mail Attachments/ case notes
                            </div>
                        </td>
                        <td class="field-score">
                            <div title="<div>Yes: Yes notes are up to date.</div>
                                 <div>No: Very little / No case notes / Un-clear case notes.</div>
                                 <div>Acceptable: Case notes look good however one mail / phone /chat is missing.</div>"
                                 class="choice-tooltip" data-toggle="tooltip">
                                <select class="selector">
                                    <option value="100" selected="selected">Yes</option>
                                    <option value="0">No</option>
                                    <option value="50">Acceptable</option>
                                </select>
                            </div>
                        </td>
                        <td class="field-weight">5</td>
                        <td></td>
                    </tr>
                    <tr class="field-row">
                        <td>7</td>
                        <td>
                            <div class="cell-tooltip" data-toggle="tooltip"
                                 title="Was the case followed up / updated regularly throughout the case lifecycle?">
                                Follow Up / Timely response
                            </div>
                        </td>
                        <td class="field-score">
                            <div title="<div>Yes: Engineer followed up and case notes are up to date.</div>
                                 <div>No: Lag in follow up / No follow up.</div>
                                 <div>Acceptable: Intermittent follow up by engineer.</div>"
                                 class="choice-tooltip" data-toggle="tooltip">
                                <select class="selector">
                                    <option value="100" selected="selected">Yes</option>
                                    <option value="0">No</option>
                                    <option value="50">Acceptable</option>
                                </select>
                            </div>
                        </td>
                        <td class="field-weight">5</td>
                        <td></td>
                    </tr>
                    <tr class="section-score-row">
                        <td colspan="2">Section Score</td>
                        <td class="section-score"></td>
                        <td class="section-weight"></td>
                        <td></td>
                    </tr>
                    <tr class="section-row">
                        <td colspan="5">Section 3: Technical Review:</td>
                    </tr>
                    <tr class="field-row">
                        <td>8</td>
                        <td>
                            <div class="cell-tooltip" data-toggle="tooltip"
                                 title="Did the engineer understand the requester\'s technical requirements correctly?">
                                Understanding customer's requirement
                            </div>
                        </td>
                        <td class="field-score">
                            <div title="<div>Yes: Yes and notes are up to date.</div>
                                 <div>No: Engineer did not understand the requirement.</div>
                                 <div>Acceptable: Yes however it was not documented/ Engineer did not understand the requirement first time however he did eventually understand the requirement.</div>"
                                 class="choice-tooltip" data-toggle="tooltip">
                                <select class="selector">
                                    <option value="100" selected="selected">Yes</option>
                                    <option value="0">No</option>
                                    <option value="50">Acceptable</option>
                                </select>
                            </div>
                        </td>
                        <td class="field-weight">5</td>
                        <td></td>
                    </tr>
                    <tr class="field-row">
                        <td>9</td>
                        <td>
                            <div class="cell-tooltip" data-toggle="tooltip"
                                 title="Did the engineer follow the correct technical approach and provided the accurate solution?">
                                Technical Approach
                            </div>
                        </td>
                        <td class="field-score">
                            <div title="<div>Yes: Yes and appropriate solution was provided the first time.</div>
                                 <div>No: Engineer did not follow the right technical approach.</div>
                                 <div>Acceptable: Yes but documentation not clear /needs improvement in certain aspects.</div>"
                                 class="choice-tooltip" data-toggle="tooltip">
                                <select class="selector">
                                    <option value="100" selected="selected">Yes</option>
                                    <option value="0">No</option>
                                    <option value="50">Acceptable</option>
                                </select>
                            </div>
                        </td>
                        <td class="field-weight">5</td>
                        <td></td>
                    </tr>
                    <tr class="field-row">
                        <td>10</td>
                        <td>
                            <div class="cell-tooltip" data-toggle="tooltip"
                                 title="Did the engineer provide a complete solution as requested?">
                                Completeness of the solution offered
                            </div>
                        </td>
                        <td class="field-score">
                            <div title="<div>Yes: Yes and case notes are clear.</div>
                                 <div>No: Solution is not complete.</div>
                                 <div>Acceptable: Yes, however engineer can improve on some aspects.</div>"
                                 class="choice-tooltip" data-toggle="tooltip">
                                <select class="selector">
                                    <option value="100" selected="selected">Yes</option>
                                    <option value="0">No</option>
                                    <option value="50">Acceptable</option>
                                </select>
                            </div>
                        </td>
                        <td class="field-weight">5</td>
                        <td></td>
                    </tr>
                    <tr class="field-row">
                        <td>11</td>
                        <td>
                            <div class="cell-tooltip" data-toggle="tooltip"
                                 title="Did the engineer proactively suggest additional / alternative products or solutions when appropriate (up-sell)?">
                                Upsale ( Bonus Marks )
                            </div>
                        </td>
                        <td class="field-score">
                            <div title="<div>Yes: Yes.</div>
                                 <div>No: There was a Upselling opportunity , however engineer did not recommend.</div>
                                 <div>Not Applicable: No Upselling opportunity.</div>"
                                 class="choice-tooltip" data-toggle="tooltip"><select class="selector">
                                    <option value="100" selected="selected">Yes</option>
                                    <option value="0">No</option>
                                    <option value="100">Not Applicable</option>
                                </select></div>
                        </td>
                        <td class="field-weight">5</td>
                        <td></td>
                    </tr>
                    <tr class="field-row">
                        <td>12</td>
                        <td>
                            <div class="cell-tooltip" data-toggle="tooltip"
                                 title="Did the engineer escalate the case as per the TSN P&P to Techlead/Senior Engineer when appropriate?">
                                Escalation
                            </div>
                        </td>
                        <td class="field-score">
                            <div title="<div>Yes: Yes.</div>
                                 <div>Acceptable: No escalation required.</div>
                                 <div>Not Applicable: Engineer should have escalated however did not.</div>"
                                 class="choice-tooltip" data-toggle="tooltip">
                                <select class="selector">
                                    <option value="100" selected="selected">Yes</option>
                                    <option value="50">Acceptable:</option>
                                    <option value="100">Not Applicable</option>
                                </select>
                            </div>
                        </td>
                        <td class="field-weight">5</td>
                        <td></td>
                    </tr>
                    <tr class="section-score-row">
                        <td colspan="2">Section Score</td>
                        <td class="section-score"></td>
                        <td class="section-weight"></td>
                        <td></td>
                    </tr>
                    <tr class="section-row">
                        <td colspan="5">Section 4:  (Manager needs to be Engaged)</td>
                    </tr>
                    <tr class="field-row">
                        <td>13</td>
                        <td>
                            <div class="cell-tooltip" data-toggle="tooltip"
                                 title="Did engineer comply with Cisco Information handling policies?  No Cisco Confidential Information can be shared with Cisco Partners and end customers. (example: Roadmaps or documents marked \'Cisco Confidential\')">
                                Confidential Information
                            </div>
                        </td>
                        <td class="field-score">
                            <div title="<div>Yes: No confidential information was shared.</div>
                                 <div>No: Engineer did not comply with cisco confidential information sharing  policy and shared the information with partners or un-authorized personals.</div>"
                                 class="choice-tooltip" data-toggle="tooltip">
                                <select class="selector">
                                    <option value="100" selected="selected">Yes</option>
                                    <option value="0">No</option>
                                </select>
                            </div>
                        </td>
                        <td class="field-weight">5</td>
                        <td></td>
                    </tr>
                    <tr class="field-row">
                        <td>14</td>
                        <td>
                            <div class="cell-tooltip" data-toggle="tooltip"
                                 title="Did the engineer comply with copyright laws? No 3rd party copyrighted information can be shared with Cisco Partners and end customers.  (example: Gartner Group copyrighted materials)">
                                Usage of 3rd Party Confidential Information
                            </div>
                        </td>
                        <td class="field-score">
                            <div title="<div>Yes: No 3rd party confidential information was shared?</div>
                                 <div>No: 3rd party confidential information shared?</div>"
                                 class="choice-tooltip" data-toggle="tooltip">
                                <select class="selector">
                                    <option value="100" selected="selected">Yes</option>
                                    <option value="0">No</option>
                                </select>
                            </div>
                        </td>
                        <td class="field-weight">5</td>
                        <td></td>
                    </tr>
                    <tr class="field-row">
                        <td>15</td>
                        <td>
                            <div class="cell-tooltip" data-toggle="tooltip"
                                 title="Did the TSN engineer following the CH P&P for closing the case?">
                                Permission to close the case ( mark it resolved in SFDC )
                            </div>
                        </td>
                        <td class="field-score">
                            <div title="<div>Yes: Yes.</div>
                                 <div>No: Engineer abruptly  closed the case without appropriate case notes.</div>"
                                 class="choice-tooltip" data-toggle="tooltip">
                                <select class="selector">
                                    <option value="100" selected="selected">Yes</option>
                                    <option value="0">No</option>
                                </select>
                            </div>
                        </td>
                        <td class="field-weight">5</td>
                        <td></td>
                    </tr>
                    <tr class="section-score-row">
                        <td colspan="2">Section Score</td>
                        <td class="section-score"></td>
                        <td class="section-weight"></td>
                        <td></td>
                    </tr>
                    <tr class="section-row">
                        <td colspan="5">Section 5: Professionalism</td>
                    </tr>
                    <tr class="field-row">
                        <td>16</td>
                        <td>
                            <div class="cell-tooltip" data-toggle="tooltip"
                                 title="Did engineer use appropriate professional language in communications with the requester?">
                                Grammar/Spelling/Appropriate language
                            </div>
                        </td>
                        <td class="field-score">
                            <div title="<div>Yes: Yes.</div>
                                 <div>No: Engineer has serious language issues.</div>
                                 <div>Acceptable: Few mistakes.</div>"
                                 class="choice-tooltip" data-toggle="tooltip">
                                <select class="selector">
                                    <option value="100" selected="selected">Yes</option>
                                    <option value="0">No</option>
                                    <option value="50">Acceptable</option>
                                </select>
                            </div>
                        </td>
                        <td class="field-weight">5</td>
                        <td></td>
                    </tr>
                    <tr class="field-row">
                        <td>17</td>
                        <td>
                            <div class="cell-tooltip" data-toggle="tooltip"
                                 title="Did the engineer use the appropriate Templates as defined in the TSN Case Handling P&P?">
                                Templates
                            </div>
                        </td>
                        <td class="field-score">
                            <div title="<div>Yes: Yes.</div>
                                 <div>No: Engineer did not use any templates.</div>
                                 <div>Acceptable: Engineer missed out on a template while communicating and we want to give engineer benefit of doubt.</div>"
                                 class="choice-tooltip" data-toggle="tooltip">
                                <select class="selector">
                                    <option value="100" selected="selected">Yes</option>
                                    <option value="0">No</option>
                                    <option value="50">Acceptable</option>
                                </select>
                            </div>
                        </td>
                        <td class="field-weight">5</td>
                        <td></td>
                    </tr>
                    <tr class="section-score-row">
                        <td colspan="2">Section Score</td>
                        <td class="section-score"></td>
                        <td class="section-weight"></td>
                        <td></td>
                    </tr>
                    <tr class="final-row">
                        <td class="final" colspan=2>Final Total Score on the Case</td>
                        <td class="final-score"></td>
                        <td class="final-weight"></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </body>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript">
        $( document ).ready( function()
        {
            populate();
//            $( '.cell-tooltip' ).tooltip();
//            $( '.cell-tooltip' ).each( function( e ) {
//                var td = $( this ).parent( 'td' );
//                $( this ).css( 'height', td.height());
//                $( this ).tooltip({
//                    placement: 'top',
//                    html: 'true',
//                    trigger: 'hover'
//                });
//            });

            $( '.choice-tooltip' ).each( function( e ) {
                var td = $( this ).parent( 'td' );
                $( this ).css( 'height', td.height());
                $( this ).tooltip({
                    placement: 'right',
                    html: 'true',
                    trigger: 'hover'
//                    trigger: 'hover focus click'
                });
            });

            $( '.choice-popover' ).each( function( e ) {
                var td = $( this ).parent( 'td' );
                $( this ).css( 'height', td.height());
                $( this ).popover({
                    placement: 'right',
                    html: 'true',
                    trigger: 'hover'
                });
            });
        });

        function getSectionScore( sfield, wfield, ssection, wsection )
        {
            var tempweight = wfield + wsection;
            var ret = ssection * wsection / tempweight + sfield * wfield / tempweight;
            return ret;
        };

        function populate()
        {
            var sectionArray = $( 'html' ).find( 'tbody' ).children( 'tr' );

            var sWeight = 0;
            var gWeight = 0;

            var sScore = 0;
            var gScore = 0;

            sectionArray.each( function()
            {
                if( $( this ).hasClass( 'section-score-row' ) )
                {
                    var sectionScore = $( this ).children( '.section-score' );
                    var sectionWeight = $( this ).children( '.section-weight' );

                    $( sectionWeight ).text( sWeight.toString() );
                    $( sectionScore ).text( sScore.toString() );

                    gScore = getSectionScore( sScore, sWeight, gScore, gWeight );
                    gWeight += sWeight;

                    sWeight = 0;
                    sScore = 0;
                }
                if( $( this ).hasClass( 'field-row' ) )
                {
                    var fieldScore = $( this ).children( '.field-score' ).find( 'select' );
                    var fieldWeight = $( this ).children( '.field-weight' );

                    var sField = parseInt( $( fieldScore ).children().val() );
                    var wField = parseInt( $( fieldWeight ).text() );

                    sScore = getSectionScore( sField, wField, sScore, sWeight );
                    sWeight += wField;
                }
                if( $( this ).hasClass( 'final-row' ) )
                {
                    var auditScore = $( this ).children( '.final-score' );
                    var auditWeight = $( this ).children( '.final-weight' );

                    $( auditWeight ).text( gWeight.toString() );
                    $( auditScore ).text( gScore.toString() );
                }
            } );

        }
        ;

        function colorMe( e, color )
        {
            switch( color )
            {
                case 'yellow':
                    $( e ).css( 'background-color', 'yellow' );
                    break;
                case 'green':
                    $( e ).css( 'background-color', 'green' );
                    break;
                case 'red':
                    $( e ).css( 'background-color', 'red' );
                    break;
                case 'blue':
                    $( e ).css( 'background-color', 'blue' );
                    break;
                default:
                    var parent = $( e ).parent();
                    $( e ).css( 'background-color', $( parent ).css( 'background-color' ) );
//                    $( e ).css( 'background-color', 'white' );
            }
        }
        ;

        $( '.selector' ).on( 'change', function(){
            populate();
        });

        $( 'TR' ).on( 'hover', function(){
            colorMe( this, 'red' );
        }, function(){
            colorMe( this );
        });

//        $( function()
//        {
//            $( '[select]' ).change( function()
//            {
//                populate();
//            } );
//
//            $( 'tr' ).hover( function()
//            {
//                colorMe( this, 'red' );
//            },
//                    function()
//                    {
//                        colorMe( this );
//                    } );
//        } );
    </script>
</html>
